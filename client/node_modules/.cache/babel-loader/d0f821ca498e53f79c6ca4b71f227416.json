{"ast":null,"code":"import axios from 'axios';\nimport { API_URL } from '../config';\nimport { setUser } from '../reducers/userReducer';\nexport const registration = async (first_name, last_name, login, password) => {\n  try {\n    const response = await axios.post(`${API_URL}api/auth/registration`, {\n      first_name,\n      last_name,\n      login,\n      password\n    });\n  } catch (e) {\n    var _e$response, _e$response$data;\n\n    alert(e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message);\n  }\n};\nexport const login = (login, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${API_URL}api/auth/login`, {\n        login,\n        password\n      });\n      dispatch(setUser(response.data.user));\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n\n      alert(e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message);\n    }\n  };\n};\nexport const auth = (login, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(`${API_URL}api/auth/auth`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      dispatch(setUser(response.data.user));\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      localStorage.removeItem('token');\n    }\n  };\n};","map":{"version":3,"sources":["C:/GitHub/course_work_db/client/src/actions/user.js"],"names":["axios","API_URL","setUser","registration","first_name","last_name","login","password","response","post","e","alert","data","message","dispatch","user","localStorage","setItem","token","auth","get","headers","Authorization","getItem","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAAQC,OAAR,QAAsB,yBAAtB;AAEA,OAAO,MAAMC,YAAY,GAAG,OAAOC,UAAP,EAAmBC,SAAnB,EAA6BC,KAA7B,EAAoCC,QAApC,KAAiD;AACzE,MAAI;AACA,UAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAN,CAAY,GAAER,OAAQ,uBAAtB,EAA8C;AACjEG,MAAAA,UADiE;AAEjEC,MAAAA,SAFiE;AAGjEC,MAAAA,KAHiE;AAIjEC,MAAAA;AAJiE,KAA9C,CAAvB;AAMH,GAPD,CAOE,OAAOG,CAAP,EAAU;AAAA;;AACRC,IAAAA,KAAK,CAACD,CAAD,aAACA,CAAD,sCAACA,CAAC,CAAEF,QAAJ,oEAAC,YAAaI,IAAd,qDAAC,iBAAmBC,OAApB,CAAL;AACH;AAEJ,CAZM;AAcP,OAAO,MAAMP,KAAK,GAAI,CAACA,KAAD,EAAQC,QAAR,KAAqB;AACvC,SAAO,MAAMO,QAAN,IAAkB;AACzB,QAAI;AACA,YAAMN,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAN,CAAY,GAAER,OAAQ,gBAAtB,EAAuC;AAC1DK,QAAAA,KAD0D;AAE1DC,QAAAA;AAF0D,OAAvC,CAAvB;AAIAO,MAAAA,QAAQ,CAACZ,OAAO,CAACM,QAAQ,CAACI,IAAT,CAAcG,IAAf,CAAR,CAAR;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BT,QAAQ,CAACI,IAAT,CAAcM,KAA5C;AACH,KAPD,CAOE,OAAOR,CAAP,EAAU;AAAA;;AACRC,MAAAA,KAAK,CAACD,CAAD,aAACA,CAAD,uCAACA,CAAC,CAAEF,QAAJ,sEAAC,aAAaI,IAAd,sDAAC,kBAAmBC,OAApB,CAAL;AACH;AACA,GAXD;AAYH,CAbM;AAeP,OAAO,MAAMM,IAAI,GAAI,CAACb,KAAD,EAAQC,QAAR,KAAqB;AACtC,SAAO,MAAMO,QAAN,IAAkB;AACzB,QAAI;AACA,YAAMN,QAAQ,GAAG,MAAMR,KAAK,CAACoB,GAAN,CAClB,GAAEnB,OAAQ,eADQ,EAEvB;AACIoB,QAAAA,OAAO,EAAC;AAACC,UAAAA,aAAa,EAAG,UAASN,YAAY,CAACO,OAAb,CAAqB,OAArB,CAA8B;AAAxD;AADZ,OAFuB,CAAvB;AAMAT,MAAAA,QAAQ,CAACZ,OAAO,CAACM,QAAQ,CAACI,IAAT,CAAcG,IAAf,CAAR,CAAR;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BT,QAAQ,CAACI,IAAT,CAAcM,KAA5C;AACH,KATD,CASE,OAAOR,CAAP,EAAU;AACRM,MAAAA,YAAY,CAACQ,UAAb,CAAwB,OAAxB;AACH;AACA,GAbD;AAcH,CAfM","sourcesContent":["import axios from 'axios'\r\nimport { API_URL } from '../config'\r\nimport {setUser} from '../reducers/userReducer'\r\n\r\nexport const registration = async (first_name, last_name,login, password) => {\r\n    try {\r\n        const response = await axios.post(`${API_URL}api/auth/registration`, {\r\n            first_name,\r\n            last_name,\r\n            login,\r\n            password\r\n        })\r\n    } catch (e) {\r\n        alert(e?.response?.data?.message)\r\n    }\r\n\r\n}\r\n\r\nexport const login =  (login, password) => {\r\n    return async dispatch => {\r\n    try {\r\n        const response = await axios.post(`${API_URL}api/auth/login`, {\r\n            login,\r\n            password\r\n        })\r\n        dispatch(setUser(response.data.user))\r\n        localStorage.setItem('token', response.data.token)\r\n    } catch (e) {\r\n        alert(e?.response?.data?.message)\r\n    }\r\n    }\r\n}\r\n\r\nexport const auth =  (login, password) => {\r\n    return async dispatch => {\r\n    try {\r\n        const response = await axios.get(\r\n            `${API_URL}api/auth/auth`, \r\n        {\r\n            headers:{Authorization: `Bearer ${localStorage.getItem('token')}`}\r\n        }\r\n        )\r\n        dispatch(setUser(response.data.user))\r\n        localStorage.setItem('token', response.data.token);\r\n    } catch (e) {\r\n        localStorage.removeItem('token');\r\n    }\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}