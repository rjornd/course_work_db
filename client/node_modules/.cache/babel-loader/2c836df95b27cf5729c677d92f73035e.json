{"ast":null,"code":"import axios from 'axios';\nimport { API_URL } from '../config';\nimport { setUser } from '../reducers/userReducer';\nexport const registration = async (nickname, password) => {\n  try {\n    const response = await axios.post(`${API_URL}api/auth/registration`, {\n      nickname,\n      password\n    });\n  } catch (e) {\n    alert(e);\n  }\n};\nexport const login = (nickname, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${API_URL}api/auth/login`, {\n        nickname,\n        password\n      });\n      dispatch(setUser(response.data.user));\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      alert(e);\n    }\n  };\n};\nexport const auth = (nickname, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(`${API_URL}api/auth/auth`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      dispatch(setUser(response.data.user));\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      localStorage.removeItem('token');\n    }\n  };\n};\nexport const uploadAvatar = file => {\n  return async dispatch => {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      const response = await axios.post(`${API_URL}api/files/avatar`, formData, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      dispatch(setUser(response.data));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const deleteAvatar = () => {\n  return async dispatch => {\n    try {\n      const response = await axios.delete(`${API_URL}api/files/avatar`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      dispatch(setUser(response.data));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};","map":{"version":3,"sources":["C:/GitHub/course_work_db/client/src/actions/user.js"],"names":["axios","API_URL","setUser","registration","nickname","password","response","post","e","alert","login","dispatch","data","user","localStorage","setItem","token","auth","get","headers","Authorization","getItem","removeItem","uploadAvatar","file","formData","FormData","append","console","log","deleteAvatar","delete"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { API_URL } from '../config'\r\nimport {setUser} from '../reducers/userReducer'\r\nexport const registration = async (nickname, password) => {\r\n    try {\r\n        const response = await axios.post(`${API_URL}api/auth/registration`, {\r\n            nickname,\r\n            password\r\n        })\r\n    } catch (e) {\r\n        alert(e)\r\n    }\r\n\r\n}\r\n\r\nexport const login =  (nickname, password) => {\r\n    return async dispatch => {\r\n    try {\r\n        const response = await axios.post(`${API_URL}api/auth/login`, {\r\n            nickname,\r\n            password\r\n        })\r\n        dispatch(setUser(response.data.user))\r\n        localStorage.setItem('token', response.data.token)\r\n    } catch (e) {\r\n        alert(e)\r\n    }\r\n    }\r\n}\r\n\r\nexport const auth =  (nickname, password) => {\r\n    return async dispatch => {\r\n    try {\r\n        const response = await axios.get(\r\n            `${API_URL}api/auth/auth`, \r\n        {\r\n            headers:{Authorization: `Bearer ${localStorage.getItem('token')}`}\r\n        }\r\n        )\r\n        dispatch(setUser(response.data.user))\r\n        localStorage.setItem('token', response.data.token);\r\n    } catch (e) {\r\n        localStorage.removeItem('token');\r\n    }\r\n    }\r\n}\r\n\r\nexport const uploadAvatar =  (file) => {\r\n        return async dispatch => {\r\n        try {\r\n            const formData = new FormData()\r\n            formData.append('file', file)\r\n            const response = await axios.post(\r\n                `${API_URL}api/files/avatar`, formData,\r\n            {\r\n                headers:{Authorization: `Bearer ${localStorage.getItem('token')}`}\r\n            }\r\n            )\r\n            dispatch(setUser(response.data))\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const deleteAvatar =  () => {\r\n    return async dispatch => {\r\n    try {\r\n        const response = await axios.delete(\r\n            `${API_URL}api/files/avatar`,\r\n        {\r\n            headers:{Authorization: `Bearer ${localStorage.getItem('token')}`}\r\n        }\r\n        )\r\n        dispatch(setUser(response.data))\r\n    } catch (e) {\r\n        console.log(e)\r\n    }\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}